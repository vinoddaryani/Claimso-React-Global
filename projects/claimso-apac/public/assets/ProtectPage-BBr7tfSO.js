import{j as e,I as j,B as u,r as n,b as g}from"./index-DjALMzzH.js";const x=({quote:s,isRecommended:t=!1,onSelectPlan:a})=>e.jsxs("div",{className:`offer-card ${t?"recommended":""}`,children:[t&&e.jsx("div",{className:"offer-card__badge",children:"Recommended by Claimso"}),e.jsxs("div",{className:"offer-card__header",children:[e.jsx("img",{src:s.partnerLogoUrl||"placeholder.png",alt:`${s.partnerName} logo`,className:"offer-card__logo"}),e.jsxs("div",{className:"offer-card__price-info",children:[e.jsxs("span",{className:"price",children:["$",s.price.toFixed(2)]}),e.jsxs("span",{className:"duration",children:["for ",s.durationMonths," months"]})]})]}),e.jsx("div",{className:"offer-card__body",children:e.jsx("ul",{className:"coverage-list",children:s.coverage.map((i,l)=>e.jsxs("li",{children:[e.jsx(j,{name:"check_circle",size:16,color:"var(--status-delivered)"})," ",i]},l))})}),e.jsxs("div",{className:"offer-card__footer",children:[e.jsxs("p",{className:"administered-by",children:["Plan administered by ",s.partnerName]}),e.jsx(u,{onClick:()=>a(s),variant:t?"primary":"secondary",style:{width:"100%"},children:"Select Plan & Proceed"})]})]}),v=({purchase:s,onSelectPlan:t})=>{const[a,i]=n.useState([]),[l,d]=n.useState(!0),[m,f]=n.useState("");n.useEffect(()=>{if(!s){d(!1);return}(async()=>{try{d(!0),f("");const o={price:s.price,brand:s.manufacturer,model:s.name},r=await g(s.category,s.region||"US",o);if(r.quotes&&r.quotes.length>0){const p=r.quotes.slice(0,3);i(p)}}catch(o){f("Could not load protection plans."),console.error(o)}finally{d(!1)}})()},[s]);const h=()=>{if(l)return e.jsx("div",{children:"Loading protection plans..."});if(m)return e.jsx("div",{className:"error-message",children:m});if(a.length===0)return e.jsx("div",{className:"empty-message",children:"No protection plans available for this item yet."});const c=a[0],o=a.slice(1);return e.jsxs("div",{className:"protection-offers-list",children:[c&&e.jsx(x,{quote:c,isRecommended:!0,onSelectPlan:()=>t(s,c)}),o.map(r=>e.jsx(x,{quote:r,onSelectPlan:()=>t(s,r)},r.partnerId))]})};return e.jsxs("div",{className:"protect-page",children:[e.jsxs("div",{className:"protect-page__header",children:[e.jsx("h1",{children:"Protect Your Purchase"}),e.jsxs("p",{children:['Add an extra layer of security to your "',s?.name||"item",'" with a trusted plan.']})]}),e.jsx("div",{className:"protect-page__content",children:h()})]})};export{v as default};
